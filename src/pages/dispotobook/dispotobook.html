
<ion-header>
    <header-content class="header-trt" title="Disponibilités" backEnabled={{true}} (onBack)="onClickBack()"></header-content> 
</ion-header>
  
<ion-content>
  <h6 class="decale">Saisir les disponibilités de votre place de parking</h6>
 
       <!-- {{ this.dispos | async  | json  }}   --> 
       <!-- <ul>
          <li *ngFor="let item of dispos  ">
            {{ item | json  }}
          </li>  
       </ul>  -->

     <ion-grid>
   
        <!--  Entête de la liste  -->
        <ion-row>
     
           <ion-col width-30 ion-left>
                <ion-label >Date</ion-label>   <!-- fixed stacked -->  
           </ion-col>
           <ion-col width-40 ion-left>
                <ion-label >Debut/Fin </ion-label>
           </ion-col>
           <ion-col width-40 ion-left>
                <ion-label >Plaque réserv.</ion-label>
           </ion-col>
           <ion-col width-20>
                <ion-label ></ion-label>       
           </ion-col>   
        </ion-row>

        <ion-row *ngFor="let dispo of dispos">       
              <ion-col width-30>
                  <ion-label ion-datetime >{{dispo?.dateDebDispo | date: 'dd.MM.yyyy'}}</ion-label>  
                  <ion-label ion-datetime >{{dispo?.dateFinDispo | date: 'dd.MM.yyyy'}}</ion-label>            
              </ion-col>
              <ion-col width-40>           
                  <ion-label ion-datetime >de {{dispo?.dateDebDispo | date: 'HH.mm'}} heure</ion-label>    
                  <ion-label ion-datetime >a &nbsp; {{dispo?.dateFinDispo | date: 'HH.mm'}} heure</ion-label>          
              </ion-col>
              <ion-col width-40>
                  <ion-label>{{ dispo.resNoplaque }}</ion-label>  
              </ion-col> 
              <ion-col width-20>
               <!-- <button ion-button color="secondary" id="dispoDel" onSubmit="document.getElementById('dispoDel').disabled=true;"  (click)="deleteDispo(dispo.$key)">Effacer</button> -->
                  <ion-icon name="trash" outline color="danger" class="iconSizeFormat" (click)="deleteDispo(dispo.$key)"  id="dispoDel" onSubmit="document.getElementById('dispoDel').disabled=true;"></ion-icon>
            </ion-col>
        </ion-row>  

        <form [formGroup]="myForm" (ngSubmit)="onSubmit()">  
            <ion-row>      
              <ion-col width-40>   
                <!-- <button full="true" [min]="now" calendar="true" [(ngModel)]="dispo.dateDispo" ion-item ion-datepicker> </button>   -->
                <ion-item>    <!--  cancelText="Annuler" ionCancel="console.log('canceled')" -->
                  <ion-datetime [min]="now" formControlName="dateDebut" doneText="Saisir" cancelText="Annuler" ionCancel="dateRefresh()" displayFormat="DD.MM.YY :HH"  pickerFormat="DD.MMMM.YYYY :HH" [(ngModel)]="newDebDispo" ></ion-datetime>              
                </ion-item>  
                <small  class="notice" [hidden]="myForm.controls.dateDebut.valid || (myForm.controls.dateDebut.pristine)"> <!-- && !submitted)"> --> 
                      La date début est requise.
                </small>    
              </ion-col>

              <ion-col width-40>
                <ion-item>          
                  <ion-datetime [min]="now" formControlName="dateFin" doneText="Saisir" cancelText="Annuler" displayFormat="DD.MM.YY :HH" pickerFormat="DD.MMMM.YYYY :HH" [(ngModel)]="newFinDispo" ></ion-datetime> 
                </ion-item>     
                  <small  class="notice" [hidden]="myForm.controls.dateFin.valid || (myForm.controls.dateFin.pristine)"> <!-- && !submitted)"> --> 
                      La date de fin est requise.
                </small>     
              </ion-col>

              <ion-col width-20>        
              <!-- <button ion-button round small color="secondary" id="dispoIns" onSubmit="document.getElementById('dispoIns').disabled=true;" (click)="insertDispo()">Ajouter</button>  -->
                   <ion-icon name="add" color="secondary" class="iconSizeFormat" (click)="insertDispo();" id="dispoIns" onSubmit="document.getElementById('dispoIns').disabled=true;"></ion-icon> 
              </ion-col>  
            </ion-row>
              
            <ion-row>
              <ion-col width-10> 
                   <button type="reset" color="secondary" ng-click="myForm.$setPristine()">RESET</button> 
              <!--     <ion-icon item-right color="secondary" name="refresh" class="iconRefreshFormat" (click)="dateRefresh()"></ion-icon> -->
              </ion-col>
            
            </ion-row>  
        </form>
  
          <ion-item *ngIf="error" class="signup_error">
            {{error}}
          </ion-item>

        </ion-grid>
   
    <!--  avatar  
    <ion-item  *ngFor="let item of items" (click)="selectItem(item.id)">
      <ion-avatar item-left>
        <img src="{{item.image}}">
      </ion-avatar>
    </ion-item>  -->
  
</ion-content>
